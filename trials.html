<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Discover the best selection of trials bikes from top brands like Beta, GasGas, and TRS. Compare prices, specs, and deals on new and used trials bikes across the UK. Stay updated with the latest trials bike news and reviews.">
                <meta name="keywords" content="trials bikes, trials motorbikes, Beta trials bike, GasGas trials, TRS bikes, buy trials bike UK, used trials bikes, trials bike comparison, sherco, Vertigo, Montessa, Scorpa , motorcycle trials UK">
		 <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
       <meta name="google-adsense-account" content="ca-pub-7960582198518252">
		<script async 
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7960582198518252"
  crossorigin="anonymous">
</script>

       
		
		<title>Trials Bikes</title>

		<!-- Google font -->
		<link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
                <link rel="icon" href="images/logo.png" type="image/png">
		<!-- Bootstrap -->
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>

		<!-- Slick -->
		<link type="text/css" rel="stylesheet" href="css/slick.css"/>
		<link type="text/css" rel="stylesheet" href="css/slick-theme.css"/>

		<!-- nouislider -->
		<link type="text/css" rel="stylesheet" href="css/nouislider.min.css"/>

		<!-- Font Awesome Icon -->
		<link rel="stylesheet" href="css/font-awesome.min.css">

		<!-- Custom stlylesheet -->
		<link type="text/css" rel="stylesheet" href="css/style.css"/>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

    </head>
	<body>
		<!-- HEADER -->
		<header>
			<!-- TOP HEADER -->
			<div id="top-header">
				<div class="container">
					<ul class="header-links pull-right">
						<li><a href="#"><i class="fa fa-instagram fa-2x"></i></a></li>
						<li><a href="#"><i class="fa fa-facebook fa-2x"></i> </a></li>
						
					</ul>
					<ul class="header-links pull-right">
						<li><a href="#"><i class=""></i> </a></li>
						<li><a href="#"><i class=""></i> </a></li>
					</ul>
				</div>
			</div>
			<!-- /TOP HEADER -->

			<!-- MAIN HEADER -->
			<div id="header">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<!-- LOGO -->
						<div class="col-md-3">
							<div class="header-logo">
								<a href="#" class="logo">
									<img src="./images/logo.png" alt="" height="150px" width="125px">
								</a>
							</div>
							
						</div>
						<!-- /LOGO -->

						<!-- SEARCH BAR -->

						<!-- /SEARCH BAR -->

						<!-- ACCOUNT -->
						<div class="col-md-3 clearfix">
							<div class="header-ctn">
								<!-- Wishlist -->
								<div>
									<a href="#">
										<i class=""></i>
										<span></span>
										<div class=""></div>
									</a>
								</div>
								<!-- /Wishlist -->

								<!-- Cart -->
							
								<!-- /Cart -->

								<!-- Menu Toogle -->
								   <div class="menu-toggle ">
      <a href="javascript:void(0);" id="nav-toggle-btn">
        <i class="fa fa-bars" id="menu-icon"></i>
        <span>Menu</span>
      </a>
    </div>
								<!-- /Menu Toogle -->
							</div>
						</div>
						<!-- /ACCOUNT -->
					</div>
					<!-- row -->
				</div>
				<!-- container -->
			</div>
			<!-- /MAIN HEADER -->
		</header>
		<!-- /HEADER -->

		<!-- NAVIGATION -->
		<nav id="navigation">
			<!-- container -->
			<div class="container">
				<!-- Menu Toggle Button -->
                 


				<!-- responsive-nav -->
				<div id="responsive-nav">
					<!-- NAV -->
					<ul class="main-nav nav navbar-nav">
						<li><a href="index.html">Home</a></li>
						<li class="active"><a href="trials.html">Trials Bikes</a></li>
						<li><a href="enduro.html">Enduro Bikes</a></li>
						<li><a href="mx.html">Motorcross Bikes</a></li>
						<li><a href="mountain-Bikes.html">Mountain Bikes</a></li>
						<li><a href="news.html">News</a></li>
						<li><a href="contact.html">Get in Touch</a></li>
					</ul>
					<!-- /NAV -->
				</div>
				<!-- /responsive-nav -->
			</div>
			<!-- /container -->
		</nav>
		<!-- /NAVIGATION -->

<!-- HOT DEAL SECTION -->
<div id="hot-deal" class="section" style="background-image: url('images/trial-banner.jpg');">
  <!-- container -->
  <div class="container">
    <!-- Banner Title -->
    <div class="banner-title">
      <h1>Trials Bikes</h1>
    </div>
    <!-- row -->
    <div class="row">
      <div class="col-md-12">
        <div class="hot-deal">
          <ul class="hot-deal-countdown">
            <li><div><h3></h3><span></span></div></li>
            <li><div><h3></h3><span></span></div></li>
            <li><div><h3></h3><span></span></div></li>
            <li><div><h3></h3><span></span></div></li>
          </ul>
          <h2 class="text-uppercase"></h2>
          <p></p>
          <a class="" href="#"></a>
        </div>
      </div>
    </div>
    <!-- /row -->
  </div>
  <!-- /container -->
</div>

<!-- /HOT DEAL SECTION -->

<!-- Product Listings and Ads Section -->
<div class="main-content">
    <div class="filter-container row align-items-center ">
        <div class="price-filter col-md-4 d-flex align-items-center">
            <label for="price-slider" class="me-2">Price Range:</label>
            <input type="range" id="price-slider" class="form-range" name="price-slider" min="0" max="10000" value="10000" step="10">
            <span id="price-value" class="ms-2">£10,000</span>
        </div>
        <div class="bike-type-filter col-md-4 d-flex align-items-center">
            <label for="bike-type" class="me-2">Bike Type:</label>
            <select id="bike-type" name="bike-type" class="form-select">
                <option value="Gasgas">Gasgas</option>
                <option value="Beta">Beta</option>
                <option value="TRS">TRS</option>
                <option value="Montesa">Montesa</option>
                <option value="Vertigo">Vertigo</option>
                <option value="Sherco">Sherco</option>
                <option value="Scorpa">Scorpa</option>
            </select>
        </div>
        <div class="col-md-4 text-center d-flex justify-content-center gap-3">
            <button id="filter-button" class="btn btn-custom">Go</button>
            <button id="reset-button" class="btn btn-secondary">Reset</button>
        </div>
    </div>
</div>


<!-- Content Row: Products + Ad Sidebar -->
<div class="custom-layout">
  <!-- Product Listings -->
  <div class="product-listings">
    <div id="product-container" class="product-container"></div>
	   <div class="load-more-wrapper">
  <button id="load-more" class="btn btn-custom">Load More</button>
  <p id="product-count" class="product-count-text"></p>
</div>
  </div>

  <!-- Ad Sidebar -->
  <div class="ads-section" id="ads-container"></div>

 </div>
</div>

		<!-- FOOTER -->
		<footer id="footer">
			<!-- top footer -->
			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title"></h3>
								<img src="./images/logo.png" alt="" height="150px" width="125px">
								<ul class="footer-links">
									
									
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Categories</h3>
								<ul class="footer-links">
									<li><a href="index.html">Home</a></li>
									<li><a href="trials.html">Trials Bikes</a></li>
									<li><a href="enduro.html">Enduro Bikes</a></li>
									<li><a href="mx.html">Motocross Bikes</a></li>
									<li><a href="mountain-Bikes.html">Mountain Bikes</a></li>
								</ul>
							</div>
						</div>

						<div class="clearfix visible-xs"></div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Information</h3>
								<ul class="footer-links">
									<li><a href="news.html">News</a></li>
									<li><a href="contact.html">Get in Touch</a></li>
									<li><a href="p&p.html">Privacy Policy</a></li>
									<li><a href="T&C.html">Terms & Conditions</a></li>
									<li><a href="login.html">login</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Socials</h3>
								<ul class="footer-links">
									<li><a href="#"><i class="fa fa-instagram fa-3x" ></i></a></li>
									<li><a href="#"><i class="fa fa-facebook fa-3x"></i></a></li>
								</ul>
							</div>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->

			<!-- bottom footer -->
			<div id="bottom-footer" class="section">
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-12 text-center">

							<span class="copyright">
								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								<p>
  Copyright &copy; <script>document.write(new Date().getFullYear());</script>
  All rights reserved | Dirt Bike Finder UK |
  Designed by <a href="https://wolfgang-dev.com/" target="_blank" rel="noopener noreferrer">Wolfgang Dev</a>
</p>

							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							</span>
						</div>
					</div>
						<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /bottom footer -->
		</footer>
		<!-- /FOOTER -->

		<!-- jQuery Plugins -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/slick.min.js"></script>
		<script src="js/nouislider.min.js"></script>
		<script src="js/jquery.zoom.min.js"></script>
		<script src="js/main.js"></script>
        <script>
            // Toggle the menu visibility on mobile
            function toggleMenu() {
                const navbarLinks = document.getElementById('navbar-links');
                navbarLinks.classList.toggle('active');
            }

			/* ========= GLOBAL STATE ========= */
let currentPage = 1;
const limit = 30;
let isLoading = false;
let currentFilter = null;
let totalProducts = 0;
let loadedProducts = 0;

			/* ========= ADS CONTROL ========= */
let adsLoaded = 0;
const adsPerBatch = 5;

function loadSidebarAds() {
    const adsContainer = document.getElementById("ads-container");

    for (let i = 0; i < adsPerBatch; i++) {
        const adWrapper = document.createElement("div");
        adWrapper.className = "sidebar-ad";

        adWrapper.innerHTML = `
            <ins class="adsbygoogle"
                style="display:block"
                data-ad-client="ca-pub-7960582198518252"
                data-ad-slot="5466224604"
                data-ad-format="auto"
                data-full-width-responsive="true"></ins>
        `;

        adsContainer.appendChild(adWrapper);

        try {
            (adsbygoogle = window.adsbygoogle || []).push({});
        } catch (e) {
            console.warn("Adsense error:", e);
        }
    }

    adsLoaded += adsPerBatch;
}


/* ========= FUNCTIONS ========= */
async function fetchProducts(page = 1, reset = false) {
    if (isLoading) return;
    isLoading = true;

    try {
        const container = document.getElementById('product-container');

        if (reset) {
            container.innerHTML = '';
            loadedProducts = 0;
        }

		let url = `https://dbfuk.onrender.com/products?page=${page}&limit=${limit}`;

       
let options = { method: 'GET' };

if (currentFilter) {
    options = {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(currentFilter)
    };
}


        const response = await fetch(url, options);
        const data = await response.json();

        const products = data.products;
        totalProducts = data.total;

products.forEach((product, index) => {
    const card = document.createElement('div');
    card.className = 'product-card';

    const img = Array.isArray(product.image_urls)
        ? product.image_urls[0]
        : '';

    card.innerHTML = `
        <a href="${product.product_link}" target="_blank">
            <img src="${img}">
            <h2>${product.title}</h2>
            <p>${product.price}</p>
        </a>
    `;

    container.appendChild(card);

    // Inject ad every 6 products (mobile only)
    if (
        window.innerWidth <= 768 &&
        (loadedProducts + index + 1) % 6 === 0
    ) {
        const adWrapper = document.createElement("div");
        adWrapper.className = "grid-ad";

        adWrapper.innerHTML = `
            <ins class="adsbygoogle"
                 style="display:block; width:100%;"
                 data-ad-client="ca-pub-7960582198518252"
                 data-ad-slot="5466224604"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        `;

        container.appendChild(adWrapper);

        try {
            (adsbygoogle = window.adsbygoogle || []).push({});
        } catch (e) {
            console.warn("Adsense error:", e);
        }
    }
});

// ✅ AFTER loop
loadedProducts += products.length;

        const countEl = document.getElementById('product-count');

        if (loadedProducts >= totalProducts) {
            countEl.textContent = `All ${totalProducts} products loaded`;
            document.getElementById('load-more').style.display = 'none';
        } else {
            countEl.textContent =
                `Showing ${loadedProducts} of ${totalProducts} products`;
            document.getElementById('load-more').style.display = 'block';
        }

        currentPage = page + 1;

    } catch (err) {
        console.error(err);
    } finally {
        isLoading = false;
    }
}


/* ========= INIT ========= */
document.addEventListener('DOMContentLoaded', () => {

    // Initial load
    fetchProducts(currentPage, true);
	loadSidebarAds();


    // Load more
    const loadMoreBtn = document.getElementById('load-more');
    if (loadMoreBtn) {
        loadMoreBtn.addEventListener('click', () => {
    fetchProducts(currentPage, false);
			 loadSidebarAds();
});

    }

	



    // Filter
    const filterBtn = document.getElementById('filter-button');
    if (filterBtn) {
        filterBtn.addEventListener('click', () => {
            const maxPrice = document.getElementById('price-slider').value;
            const bikeType = document.getElementById('bike-type').value;

            currentFilter = {
                maxPrice,
                bikeTypes: [bikeType]
            };

            currentPage = 1;
loadedProducts = 0;

document.getElementById("ads-container").innerHTML = "";
adsLoaded = 0;

fetchProducts(currentPage, true);
loadSidebarAds();

        });
    }

    // Reset
    const resetBtn = document.getElementById('reset-button');
    if (resetBtn) {
        resetBtn.addEventListener('click', () => {
            currentFilter = null;
currentPage = 1;
loadedProducts = 0;

document.getElementById("ads-container").innerHTML = "";
adsLoaded = 0;

fetchProducts(currentPage, true);
loadSidebarAds();

        });
    }
	

});

        
        </script>

		
		
	</body>
</html>









